# 🧩 正規表現（Regex）基本構文チートシート

## 🎯 基本マッチ
| 記号 | 意味 | 例 | マッチ例 |
|------|------|----|-----------|
| `.` | 任意の1文字（改行以外） | `a.c` | `"abc"`, `"axc"` |
| `^` | 行の先頭 | `^Hello` | `"Hello world"` の先頭にマッチ |
| `$` | 行の末尾 | `world$` | `"Hello world"` の末尾にマッチ |
| `\` | エスケープ（特殊記号を普通の文字に） | `\.` | `"a.c"` 内の `"."` |

---

## 🔢 繰り返し
| 記号 | 意味 | 例 | マッチ例 |
|------|------|----|-----------|
| `*` | 0回以上の繰り返し | `ab*` | `"a"`, `"ab"`, `"abbb"` |
| `+` | 1回以上の繰り返し | `ab+` | `"ab"`, `"abbb"`（ただの `"a"` は×） |
| `?` | 0回または1回 | `colou?r` | `"color"`, `"colour"` |
| `{n}` | ちょうどn回 | `a{3}` | `"aaa"` |
| `{n,}` | n回以上 | `a{2,}` | `"aa"`, `"aaa"`, `"aaaa..."` |
| `{n,m}` | n〜m回 | `a{2,4}` | `"aa"`, `"aaa"`, `"aaaa"` |

---

## 🔤 文字クラス（セット）
| 記号 | 意味 | 例 | マッチ例 |
|------|------|----|-----------|
| `[abc]` | a, b, c のいずれか | `[ch]at` | `"cat"`, `"hat"` |
| `[^abc]` | a, b, c **以外** | `[^0-9]` | 数字以外の文字 |
| `[a-z]` | a〜z の範囲 | `[a-zA-Z]` | 英字全般 |
| `\d` | 数字（0–9） | `\d+` | `"1234"` |
| `\D` | 非数字 | `\D+` | `"abc"` |
| `\w` | 英数字＋アンダースコア | `\w+` | `"abc_123"` |
| `\W` | 非英数字 | `\W+` | `"!!?"` |
| `\s` | 空白文字（スペース, タブなど） | `\s+` | `"  "` |
| `\S` | 非空白文字 | `\S+` | `"word"` |

---

## 🧱 グループ化・OR条件
| 記号 | 意味 | 例 | マッチ例 |
|------|------|----|-----------|
| `(abc)` | グループ化 | `(abc)+` | `"abcabc"` |
| `|` | OR条件（どちらか） | `cat|dog` | `"cat"`, `"dog"` |
| `(?:...)` | **非キャプチャグループ**（グループ化だけして記録しない） | `(?:ab)+` | `"abab"` |

---

## 🔍 アンカー・単語境界
| 記号 | 意味 | 例 | マッチ例 |
|------|------|----|-----------|
| `\b` | 単語の境界 | `\bcat\b` | `"black cat"` の `"cat"` だけ |
| `\B` | 非単語境界 | `\Bcat` | `"concatenate"` の `"cat"` 部分 |
| `(?=...)` | **肯定の先読み**（後ろに...が続く） | `\d(?=円)` | `"100円"` の `"100"` |
| `(?!...)` | **否定の先読み**（後ろに...が続かない） | `\d(?!円)` | `"100ドル"` の `"100"` |

---

## 🧠 キャプチャと参照
| 記号 | 意味 | 例 | マッチ例 |
|------|------|----|-----------|
| `( )` | キャプチャ（後で参照できる） | `(ab)\1` | `"abab"`（\1 は最初のグループ） |
| `(?P<name>...)` | 名前付きキャプチャ（Pythonなど） | `(?P<num>\d+)` | `"123"`（`num` に格納） |


# 🎯 正規表現のキャプチャ `()` の基本まとめ

## 🧠 キャプチャとは？
`()`（丸かっこ）は、**「マッチした部分を抜き出すためのグループ化」**をする構文。  
正規表現の中で「どこを取り出したいか」を指定するのに使う。

---

## 💡 基本の形
```
(パターン)
```
→ 丸かっこの中に一致した文字列を「キャプチャ（記録）」して後から取り出せる。

---

## 🧩 例1：数字を抜き出す

```python
import re
text = "ID: 12345"
result = re.search(r"ID: (\d+)", text)
print(result.group(1))  # → '12345'
```

| パターン | 意味 |
|-----------|------|
| `(\d+)` | 数字（1回以上）をキャプチャ |
| `.group(1)` | 最初のキャプチャ部分を取り出す |

💬 `"ID: 12345"` の中で  
「数字だけ」を取り出している。

---

## 🧩 例2：敬称（Title）を抜き出す（タイタニックコンペ）

```python
name = "Heikkinen, Miss. Laina"
title = re.search(r"([A-Za-z]+)\.", name).group(1)
print(title)  # → 'Miss'
```

| パターン | 意味 |
|-----------|------|
| `[A-Za-z]+` | 英字が1文字以上 |
| `\.` | ピリオドそのもの |
| `( ... )` | その部分をキャプチャ（＝抽出対象） |

📌 `"Miss."` のうち `"Miss"` を抜き出している。

---

## 🧩 例3：複数キャプチャ

```python
text = "Name: John Age: 25"
match = re.search(r"Name: (\w+) Age: (\d+)", text)
print(match.group(1))  # → 'John'
print(match.group(2))  # → '25'
```

| グループ番号 | キャプチャ内容 |
|---------------|----------------|
| `.group(1)` | `(\w+)` → “John” |
| `.group(2)` | `(\d+)` → “25” |

---

## 💬 補足
- `.group(0)` は「全体一致した部分」
- `.group(1)`, `.group(2)` … はキャプチャした順番
- **非キャプチャグループ**を使うと `( )` で囲んでも記録されない：
  ```
  (?:パターン)
  ```

---

## ✅ まとめ

| 構文 | 意味 | 用途 |
|------|------|------|
| `( ... )` | 一致した部分を**記録して抽出** | よく使う |
| `(?: ... )` | 一致はさせるが**記録しない** | グループ化だけしたいとき |
| `.group(n)` | n番目のキャプチャを取得 | Pythonなどで使用 |

---

### 🎓 覚え方
> 「( ) は “ここだけ抜き出してね” のマーカー」
>
> - 抽出したい → `( ... )`  
> - 抜き出さずグループ化だけ → `(?: ... )`


---

## 🚩 フラグ（オプション）
| フラグ | 意味 | Python | JavaScript |
|--------|------|---------|-------------|
| **i** | 大文字小文字を無視 | `re.I` | `/abc/i` |
| **m** | 複数行モード（`^`, `$` が行単位で機能） | `re.M` | `/abc/m` |
| **s** | ドットで改行もマッチ | `re.S` | `/abc/s` |
| **g** | 全文検索（複数マッチ） | – | `/abc/g` |

---

## 💡 よくある使い方サンプル

```python
# Python例
import re
text = "ID: 123, CODE: 456"
nums = re.findall(r"\d+", text)
print(nums)  # ['123', '456']
```

```javascript
// JavaScript例
const text = "abc123def456";
const nums = text.match(/\d+/g);
console.log(nums); // ["123", "456"]
```

---

## 🧩 覚え方ヒント
- 「`.` はなんでも屋」
- 「`[]` はグループの中の選択肢」
- 「`()` は塊を作る」
- 「`* + ?` は回数を決める」
- 「`\` は“特別扱い”を変えるスイッチ」
- 「`^` と `$` は始まりと終わり」
