# Titanic コンペまとめ ＋ EDA チートシート  
ツジムラさん専用まとめ  
（今回の学びを“次のコンペで再現できる形”に凝縮）

---

# 🎯 1. 今回の目標と結果
- **最終 valid スコア：85.4%**（RFベースとしては上位レベル）
- 特徴量エンジニアリングを中心に精度を改善  
- Cabin など「情報量が低いカラム」を削除した判断も正解  
- EDA の不足を痛感した → 次のコンペのテーマは **「可視化から特徴量を作れる力」**

---

# 🔥 2. 今回やった重要なこと（本質）
機械学習の実務でも通用する内容だけを残す。

## 2-1. 特徴量エンジニアリングの大切さ  
モデルより **特徴量がスコアの9割を決める**。  
今回伸びた理由はほぼ特徴量。

- **Title（称号）抽出 → 強力**
- **Age のグループ別補完（Title × Sex × Pclass）**
- **FamilySize / IsAlone の作成**
- **Fare の log 変換**
- **Cabin の欠損が多すぎ → 削除が正解**
- **Age × Sex など交互作用を作る**

## 2-2. モデル調整（RandomForest）
- 深さを浅すぎ → 適切な max_depth へ  
- min_samples_leaf / split の調整  
- n_estimators 増量  
→ さらに精度向上

## 2-3. EDA の重要性  
“傾向がわかれば特徴量が作れる”  
今回できず悔しかった部分だが、  
ツジムラさんは次でこのフェーズに入る。

---

# 🌱 3. 今後のコンペに向けての EDA チートシート

ここからは “次のコンペで迷わず書ける” を目的とした  
**可視化テンプレ集**  
（すべて `sns` で描画できるようにした構成）

---

# 3-1. カテゴリ × 目的変数（平均値の比較）
用途：性別、生存率、階級などの関係を見る

    sns.barplot(data=df, x="Sex", y="Perished")

---

# 3-2. カテゴリの分布（ヒートマップ的理解）
用途：カテゴリに偏りがあるか確認

    sns.countplot(data=df, x="Pclass", hue="Perished")

---

# 3-3. 数値 × 目的変数（分布比較）

### KDE
    sns.kdeplot(data=df, x="Age", hue="Perished", fill=True)

### Boxplot
    sns.boxplot(data=df, x="Perished", y="Fare")

---

# 3-4. 2変数の関係（特徴量作成のヒント）
外れ値発見にも有効。

    sns.scatterplot(data=df, x="Age", y="Fare", hue="Perished")

---

# 3-5. カテゴリ × 数値（Title × Age など）

    sns.boxplot(data=df, x="Title", y="Age")

---

# 3-6. 相関関係（全体を俯瞰）

    sns.heatmap(df.corr(), annot=True, cmap="coolwarm")

---

# 3-7. グループごとに平均値を見る（鉄板）

    df.groupby("Title")["Perished"].mean().sort_values()

---

# 3-8. 分布を見る（前処理のため）

    sns.histplot(df["Age"], kde=True)
    sns.histplot(df["Fare"], bins=30, kde=True)

---

# 🧪 4. Titanic でわかったこと（抽象化＝他のデータセットにも使える）

### ① 「欠損が多い特徴量は削除が正解の場合がある」
- 今回の Cabin（80%欠損）はまさにそれ  

### ② 「情報量があれば加工して使うべき」
- Name → Title  
- Ticket → prefix（今回は使わず正解）

### ③ 「補完は“データのグループ構造”を意識すると強い」
- Title × Sex × Pclass  
→ 一般コンペでも使える考え方

### ④ モデル調整は特徴量の次
- RF の深さ  
- 葉の数  
- 木の本数  
→ 特徴量を整えてから調整すると伸びる

---

# ✨ 5. 今回の反省と、次の一歩
ツジムラさんが感じた **「グラフが描けず悔しい」**  
これは今後の成長のカギ。

次のコンペでは：

1. **まず EDA（15〜30分）で傾向を見る**
2. 「使えそうな特徴量」を洗い出す
3. 前処理 → 特徴量作成 → モデル学習

という “筋の通った流れ” を踏める。

---

# 🎁 6. 最後のまとめ（ツジムラさんへ）
- 今回の成果は **スキル成長としては圧倒的に正しい方向**
- 悔しさ＝伸びしろ
- EDA を覚えれば、精度はさらに上がる
- 次のコンペの EDA はこのテンプレで迷わない

---

# 🌈 何か追加で入れたい内容ある？  
いつでも編集するから言ってね。
